<!DOCTYPE html>
<html>
<head>
	<title>Data Display App</title>

	<link rel="stylesheet" href="/bootstrap/dist/css/bootstrap.min.css" media="screen" title="no title" charset="utf-8">
	<!-- <link rel="stylesheet" href="/css/style.css" media="screen" title="no title" charset="utf-8"> -->

    <link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/angular_material/1.0.0/angular-material.min.css">
<link rel="stylesheet" href="/css/style.css" media="screen" title="no title" charset="utf-8">
    <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular-animate.min.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular-aria.min.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular-messages.min.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/angular_material/1.0.0/angular-material.min.js"></script>
    <script src="/angular-material-icons/angular-material-icons.min.js"></script>
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/angular-ui-router/0.2.18/angular-ui-router.min.js"></script>
		  <script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>

</head>
<body ng-app='myApp' ng-controller="myController" >
<div class="flexcontainer">
	<div class="flex-item" ng-repeat="item in itemcollection">

<dashboardlayout name="prarthana" result="item" name2="apurva" data="logdata">
			</dashboardlayout>
		</div>
</div>

</body>


<script>

var mainApp = angular.module("myApp", ['ngMaterial']);

         mainApp.directive('dashboardlayout', function() {
            var directive = {};
            directive.restrict = 'E';
            directive.templateUrl = "/partials/dashboardlayout.html";

            directive.scope = {
               mydata: '=name',
               myresult: '=result',
							 myname2:'=name2',
							 mylog:'=data'
            }

         return directive;
         });

				 mainApp.directive('graph', function() {
            var directive = {};
            directive.restrict = 'E';
            directive.templateUrl = "/partials/graph.html";
         return directive;
         });
				 mainApp.directive('data', function() {
            var directive = {};
            directive.restrict = 'E';
            directive.templateUrl = "/partials/data.html";
         return directive;
         });
				 mainApp.directive('flow', function() {
            var directive = {};
            directive.restrict = 'E';
            directive.templateUrl = "/partials/flow.html";
         return directive;
         });

				 mainApp.directive('donutchart', function(){
      function link(scope, el, attr){

        var color = d3.scale.category10();
        var data = scope.myresult.value;
        var width = 230;
        var height =230;
        var min = Math.min(width, height);
        var svg = d3.select(el[0]).append('svg');
        var pie = d3.layout.pie().sort(null);
        var arc = d3.svg.arc()
          .outerRadius(min / 2 * 0.9)
          .innerRadius(min / 2 * 0.5);

        svg.attr({width: width, height: height});
        var g = svg.append('g')
          // center the donut chart
          .attr('transform', 'translate(' + width / 2 + ',' + height / 2 + ')');

        // add the <path>s for each arc slice
        g.selectAll('path').data(pie(data))
          .enter().append('path')
            .style('stroke', 'white')
            .attr('d', arc)
            .attr('fill', function(d, i){ return color(i) });
      }
      return {
        link: link,
        restrict: 'E'
      };
    });
//          mainApp.directive("ngBind", function() {
//          return {
//         restrict : "E",
//         replace : true,
//         template : "<h2>This is a commment custom directive!</h2>"
//     };
// })


                 mainApp.controller('myController', ['$scope',function($scope) {
                   $scope.prarthana = { name: 'prarthana', address: 'Madhya Pradesh' };
                   $scope.apurva = { name: 'apurva', address: 'Rajsthan' };

                $scope.itemcollection=[
{"wlname": "WatchlistONE",
  "wldef":{
    "CountryName": "India",
    "CountryCode": "IND"
  },
	"value":[8, 3, 7]
},
	{"wlname": "WatchlistSECNOD",
	  "wldef":{
    "CountryName": "Pakistan",
    "CountryCode": "PAK"
  },
	"value":[15, 30, 27]
},
{	"wlname": "WatchlistTHIRD",
	  "wldef":{
    "CountryName": "America",
    "CountryCode": "USA"
  },
	"value":[38, 13, 70]
},
	{"wlname": "WatchlistFOUR",
	  "wldef":{
    "CountryName": "Britan",
    "CountryCode": "UK"
  },
	"value":[58, 32, 17]
}
];

	$scope.logdata=[
{
"CountryName": "India",
"CountryCode": "IND"
},
{
"CountryName": "Pakistan",
"CountryCode": "PAK"
},
{
	"CountryName": "America",
	"CountryCode": "USA"
},
{
	"CountryName": "Britan",
	"CountryCode": "UK"
}
];

                 }]);

</script>

</html>
